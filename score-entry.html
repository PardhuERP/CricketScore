<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Score Entry</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f2f4f8}
.header{background:#0a7cff;color:#fff;padding:14px;text-align:center}
.card{background:#fff;margin:12px;padding:16px;border-radius:12px;text-align:center}
.score{font-size:28px;font-weight:bold}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
button{padding:14px;font-size:18px;border:none;border-radius:10px;background:#0a7cff;color:#fff}
.extra{background:#ff9800}
.wicket{background:#e53935}
.back{position:absolute;left:10px;cursor:pointer}
</style>

<script>
const API_URL =
"https://script.google.com/macros/s/AKfycbzdz3UnRjf-nDbzd9WCdKpQG32jXc1ehGKeXy9q_Czm8ASwHSszmvWlNQa8OSL-6VE/exec";
</script>

</head>
<body>

<div class="header">
  <span class="back" onclick="location.href='dashboard.html'">⬅</span>
  ✍️ Score Entry
</div>

<div class="card">
  <div class="score" id="score">0 / 0</div>
  <div id="overs">Overs: 0.0</div>
</div>

<div class="card">
  <div class="grid">
    <button onclick="send('run',1)">1</button>
    <button onclick="send('run',2)">2</button>
    <button onclick="send('run',3)">3</button>
    <button onclick="send('run',4)">4</button>
    <button onclick="send('run',6)">6</button>
    <button class="wicket" onclick="send('wicket')">W</button>
    <button class="extra" onclick="send('wide')">Wd</button>
    <button class="extra" onclick="send('noball')">Nb</button>
  </div>
</div>

<script>
function send(type,value=0){
  const cb = "cb_"+Date.now();
  window[cb] = res => {

    if(res.status==="error"){
      alert(res.msg);
      return;
    }

    if(res.status==="ok"){
      document.getElementById("score").innerText =
        res.runs+" / "+res.wickets;
      document.getElementById("overs").innerText =
        "Overs: "+res.overs;
    }

    delete window[cb];
  };

  const s=document.createElement("script");
  s.src = API_URL +
    "?action=updateScore" +
    "&type="+type +
    "&value="+value +
    "&callback="+cb;
  document.body.appendChild(s);
}
</script>

</body>
</html>
