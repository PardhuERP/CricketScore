<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Live Cricket Scorer</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;background:#0b1220;color:#fff;font-family:Arial}
.header{text-align:center;padding:12px;font-size:22px;font-weight:bold}
.card{padding:10px}
.score{font-size:42px;text-align:center}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:10px}
.btn{padding:18px;border-radius:10px;text-align:center;font-size:18px;font-weight:bold;cursor:pointer}
.run{background:#2ecc71}
.extra{background:#3498db}
.wkt{background:#e74c3c}
.undo{background:#f1c40f;color:#000}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border-bottom:1px solid #333;padding:6px;text-align:center}
</style>
</head>
<body>

<div class="header">Live Score</div>

<div class="card">
  <div id="team">Warriors</div>
  <div class="score" id="score">0/0 (0.0)</div>
  <div>CRR: <span id="crr">0.00</span> | P'SHIP: <span id="pship">0 (0)</span></div>

  <table>
    <tr><th>Batter</th><th>R</th><th>B</th><th>4</th><th>6</th><th>SR</th></tr>
    <tr><td>*A</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0.00</td></tr>
    <tr><td>B</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0.00</td></tr>
  </table>

  <table>
    <tr><th>Bowler</th><th>O</th><th>M</th><th>R</th><th>W</th><th>ECO</th></tr>
    <tr><td>*1</td><td>0.0</td><td>0</td><td>0</td><td>0</td><td>0.00</td></tr>
  </table>
</div>

<div class="grid">
  <div class="btn run" onclick="send(0)">0</div>
  <div class="btn run" onclick="send(1)">1</div>
  <div class="btn run" onclick="send(2)">2</div>
  <div class="btn run" onclick="send(3)">3</div>
  <div class="btn run" onclick="send(4)">4</div>
  <div class="btn run" onclick="send(5)">5</div>
  <div class="btn run" onclick="send(6)">6</div>
  <div class="btn extra" onclick="sendExtra('Wide')">Wide</div>
  <div class="btn extra" onclick="sendExtra('NoBall')">No Ball</div>
  <div class="btn extra" onclick="sendExtra('LegBye')">Leg Bye</div>
  <div class="btn wkt" onclick="sendWicket('Bowled')">Wicket</div>
  <div class="btn wkt" onclick="sendWicket('Run out')">Run Out</div>
  <div class="btn undo" onclick="undo()">Undo</div>
</div>

<script src="config.js"></script>  

<script>

function send(r){
  callApi({runBat:r,isWide:false,isNoBall:false,wicket:false});
}
function sendExtra(type){
  if(type==="Wide") callApi({runBat:0,isWide:true,isNoBall:false,wicket:false,extraRuns:1});
  if(type==="NoBall") callApi({runBat:0,isWide:false,isNoBall:true,wicket:false,extraRuns:1});
  if(type==="LegBye") callApi({runBat:0,isWide:false,isNoBall:false,isLegBye:true,extraRuns:1});
}
function sendWicket(type){
  callApi({runBat:0,isWide:false,isNoBall:false,wicket:true,wicketType:type});
}
function callApi(data, cb){

  const params =
    Object.keys(data)
      .map(k => k + "=" + encodeURIComponent(data[k]))
      .join("&");

  fetch(API + "?" + params)
    .then(r => r.json())
    .then(cb);
}
function undo(){alert("Undo coming next");}
</script>

</body>
</html>
