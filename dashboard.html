<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cricket App Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#f2f4f8;
}
.header{
  background:#0a7cff;
  color:#fff;
  padding:16px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}
.container{ padding:16px; }
.grid{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:15px;
}
.card{
  background:#fff;
  border-radius:14px;
  padding:20px;
  text-align:center;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
  cursor:pointer;
  transition:0.2s;
}
.card:hover{ transform:scale(1.03); }
.icon{ font-size:36px; margin-bottom:10px; }
.title{ font-size:16px; font-weight:bold; }

/* ğŸ”¥ Special style for 2nd innings */
.start2{
  background:#4caf50;
  color:#fff;
}
.start2:hover{
  transform:scale(1.05);
}
</style>

<script>
const API_URL =
"https://script.google.com/macros/s/AKfycbzdz3UnRjf-nDbzd9WCdKpQG32jXc1ehGKeXy9q_Czm8ASwHSszmvWlNQa8OSL-6VE/exec";

/* ---------- JSONP ---------- */
function callAPI(params, cb){
  const f = "cb_" + Date.now();
  window[f] = res => {
    cb && cb(res);
    delete window[f];
    s.remove();
  };
  const q = Object.keys(params).map(k=>k+"="+encodeURIComponent(params[k])).join("&");
  const s = document.createElement("script");
  s.src = API_URL + "?" + q + "&callback=" + f;
  document.body.appendChild(s);
}
</script>
</head>

<body>

<div class="header">ğŸ Mini Cricket Dashboard</div>

<div class="container">
  <div class="grid">

    <div class="card" onclick="go('teams.html')">
      <div class="icon">ğŸ‘¥</div>
      <div class="title">Teams</div>
    </div>

    <div class="card" onclick="go('players.html')">
      <div class="icon">ğŸ§‘â€ğŸ¤â€ğŸ§‘</div>
      <div class="title">Players</div>
    </div>

    <div class="card" onclick="go('match-setup.html')">
      <div class="icon">ğŸ› ï¸</div>
      <div class="title">Match Setup</div>
    </div>

    <div class="card" onclick="go('score-entry.html')">
      <div class="icon">âœï¸</div>
      <div class="title">Score Entry</div>
    </div>

    <div class="card" onclick="go('live-score.html')">
      <div class="icon">ğŸ“Š</div>
      <div class="title">Live Score</div>
    </div>

    <div class="card" onclick="go('summary.html')">
      <div class="icon">ğŸ†</div>
      <div class="title">Summary</div>
    </div>

    <div class="card" onclick="go('overs.html')">
      <div class="icon">ğŸ“‹</div>
      <div class="title">Overs</div>
    </div>

    <!-- ğŸ”¥ START 2ND INNINGS (HIDDEN BY DEFAULT) -->
    <div class="card start2" id="start2Card" style="display:none" onclick="startSecondInnings()">
      <div class="icon">â–¶ï¸</div>
      <div class="title">Start 2nd Innings</div>
    </div>

    <div class="card" onclick="clearMatch()">
      <div class="icon">ğŸ§¹</div>
      <div class="title">Clear Match</div>
    </div>

  </div>
</div>

<script>
function go(page){
  location.href = page;
}

/* ğŸ”¥ CHECK MATCH STATUS ON LOAD */
window.onload = ()=>{
  callAPI({action:"getLiveScore"}, r=>{
    if(!r) return;

    console.log("LiveScore:", r);

    if(r.inningsStatus === "ENDED" && r.inningsNo === 1){
      document.getElementById("start2Card").style.display = "block";
    }else{
      document.getElementById("start2Card").style.display = "none";
    }
  });
};

/* ğŸ”¥ START 2ND INNINGS */
function startSecondInnings(){
  if(!confirm("Start 2nd Innings?")) return;

  callAPI({action:"startSecondInnings"}, res=>{
    if(res && res.status === "ok"){
      location.href = "score-entry.html";
    }else{
      alert("Unable to start 2nd innings");
    }
  });
}

/* ğŸ”¥ CLEAR MATCH */
function clearMatch(){
  if(!confirm("Clear current match? This cannot be undone.")) return;

  callAPI({action:"clearMatch"}, res=>{
    alert("Match cleared");
    location.reload();
  });
}
</script>

</body>
</html>
