<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Match Summary</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f2f4f8;
}
.header{
  background:#0a7cff;
  color:#fff;
  padding:14px;
  text-align:center;
  font-size:18px;
  font-weight:bold;
  display:flex;
  align-items:center;
}
.back{
  margin-right:10px;
  font-size:20px;
  cursor:pointer;
}
.container{ padding:16px; }

.card{
  background:#fff;
  border-radius:14px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

.title{
  font-size:16px;
  font-weight:bold;
  margin-bottom:8px;
}

.score{
  font-size:22px;
  font-weight:bold;
}

.sub{
  color:#555;
  margin-top:4px;
}

.highlight{
  background:#e3f2fd;
}

.result{
  font-size:20px;
  font-weight:bold;
  text-align:center;
  color:#2e7d32;
}
</style>

<script>
const API_URL =
"https://script.google.com/macros/s/AKfycbzdz3UnRjf-nDbzd9WCdKpQG32jXc1ehGKeXy9q_Czm8ASwHSszmvWlNQa8OSL-6VE/exec";

/* JSONP */
function callAPI(params, cb){
  const fn = "cb_" + Date.now();
  window[fn] = function(res){
    cb(res);
    delete window[fn];
    s.remove();
  };
  const q = Object.keys(params).map(k=>k+"="+encodeURIComponent(params[k])).join("&");
  const s = document.createElement("script");
  s.src = API_URL + "?" + q + "&callback=" + fn;
  document.body.appendChild(s);
}

function loadSummary(){
  callAPI({action:"getMatchSummary"}, render);
}

function render(d){
  if(!d || !d.match){
    document.getElementById("result").innerText = "Match not completed";
    return;
  }

  document.getElementById("match").innerText = d.match;

  document.getElementById("inn1").innerText =
    `${d.innings1.team}: ${d.innings1.runs}/${d.innings1.wickets}`;
  document.getElementById("inn1o").innerText =
    `Overs: ${d.innings1.overs}`;

  document.getElementById("inn2").innerText =
    `${d.innings2.team}: ${d.innings2.runs}/${d.innings2.wickets}`;
  document.getElementById("inn2o").innerText =
    `Overs: ${d.innings2.overs}`;

  document.getElementById("target").innerText =
    `Target: ${d.target}`;

  document.getElementById("result").innerText =
    d.result || "Match in progress";

  document.getElementById("topBat").innerText =
    d.topBatsman || "-";

  document.getElementById("topBowl").innerText =
    d.topBowler || "-";
}

window.onload = loadSummary;
</script>
</head>

<body>

<div class="header">
  <div class="back" onclick="location.href='dashboard.html'">‚¨Ö</div>
  üèÜ Match Summary
</div>

<div class="container">

  <div class="card highlight">
    <div class="title">Match</div>
    <div class="score" id="match">-</div>
  </div>

  <div class="card">
    <div class="title">1st Innings</div>
    <div class="score" id="inn1">-</div>
    <div class="sub" id="inn1o"></div>
  </div>

  <div class="card">
    <div class="title">2nd Innings</div>
    <div class="score" id="inn2">-</div>
    <div class="sub" id="inn2o"></div>
  </div>

  <div class="card">
    <div class="title">Target</div>
    <div class="score" id="target">-</div>
  </div>

  <div class="card highlight">
    <div class="result" id="result">-</div>
  </div>

  <div class="card">
    <div class="title">Top Batsman</div>
    <div class="score" id="topBat">-</div>
  </div>

  <div class="card">
    <div class="title">Top Bowler</div>
    <div class="score" id="topBowl">-</div>
  </div>

</div>

</body>
</html>
